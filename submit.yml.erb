<%-
  ppn   = num_cores.blank? ? 28 : num_cores.to_i
  props = case node_type
          when "hugemem"
            ":ppn=48"
          else
            ":ppn=#{ppn}"
          end
  template = (rstudio_mode == "desktop") ? "vnc" : "basic"
-%>
---
batch_connect:
  template: "<%= template %>"
script:
  <%- if node_type == "debug" -%>
  queue_name: "debug"
  <%- end -%>
  native:
    resources:
      nodes: "1<%= props %>"
